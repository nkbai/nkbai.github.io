import{_ as a,c as s,o as n,N as e}from"./chunks/framework.3a9190c5.js";const b=JSON.parse('{"title":"区块链计时器","description":"","frontmatter":{"title":"区块链计时器","date":"2018-08-27T02:48:47.000Z","draft":false,"markup":"mmark"},"headers":[],"relativePath":"blockchain/ethereum/区块链计时器.md"}'),l={name:"blockchain/ethereum/区块链计时器.md"},o=e(`<p>块计时器服务 位于&quot;github.com/SmartMeshFoundation/SmartRaiden/blockchain&quot;</p><p>区块链上应用程序的计时器实际就是每一块,也就是每一个滴答就是一块. AlarmTask提供计时服务,每当有新块到来的时候都会通过AlarmCallback进行通知.</p><h2 id="基础数据" tabindex="-1">基础数据 <a class="header-anchor" href="#基础数据" aria-label="Permalink to &quot;基础数据&quot;">​</a></h2><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//AlarmCallback stop this call back when return non nil error</span></span>
<span class="line"><span style="color:#89DDFF;">type</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">AlarmCallback</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">func(</span><span style="color:#A6ACCD;">blockNumber </span><span style="color:#C792EA;">int64</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">error</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_1-创建" tabindex="-1">1.创建 <a class="header-anchor" href="#_1-创建" aria-label="Permalink to &quot;1.创建&quot;">​</a></h2><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">NewAlarmTask</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">client </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">helper</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SafeEthClient</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">AlarmTask </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_2-注册回调函数" tabindex="-1">2.注册回调函数 <a class="header-anchor" href="#_2-注册回调函数" aria-label="Permalink to &quot;2.注册回调函数&quot;">​</a></h2><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//回调函数不能阻塞,应该立即返回,如需其他处理,可以通过 Channel.</span></span>
<span class="line"><span style="color:#82AAFF;">RegisterCallback</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">callback AlarmCallback</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_3-启动" tabindex="-1">3. 启动 <a class="header-anchor" href="#_3-启动" aria-label="Permalink to &quot;3. 启动&quot;">​</a></h2><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//直接调用 Start 即可</span></span>
<span class="line"><span style="color:#82AAFF;">Start</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_4-停止" tabindex="-1">4.停止 <a class="header-anchor" href="#_4-停止" aria-label="Permalink to &quot;4.停止&quot;">​</a></h2><p>//直接调用 Stop 即可.</p>`,12),p=[o];function t(r,c,i,d,h,m){return n(),s("div",null,p)}const y=a(l,[["render",t]]);export{b as __pageData,y as default};
