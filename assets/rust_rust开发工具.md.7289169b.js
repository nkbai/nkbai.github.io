import{o as s,c as n,e as a}from"./app.63f3ffeb.js";const e='{"title":"rust开发工具 clion","description":"","frontmatter":{"title":"rust开发工具 clion","date":"2020-01-12T03:57:03.000Z","draft":false,"tags":["rust"],"categories":["技术相关"]},"headers":[{"level":2,"title":"cfg 宏问题","slug":"cfg-宏问题"},{"level":2,"title":"#[tokio::test]无法运行测试case问题","slug":"tokio-test-无法运行测试case问题"}],"relativePath":"rust/rust开发工具.md","lastUpdated":1580438595000}',t={},p=[a('<p>这里主要是记录一些使用clion进行Rust开发碰到的一些工具性问题.</p><h2 id="cfg-宏问题"><a class="header-anchor" href="#cfg-宏问题" aria-hidden="true">#</a> cfg 宏问题</h2><p>在使用tokio 0.2以后,大量的mod都使用cfg来控制是否进行编译. 这会导致clion无法进行任何代码提示.</p><p>针对这种问题简单的办法就是手工宏展开, 右键菜单-&gt;Show Context Actions-&gt; Show single step macro expansion 比如.</p><div class="language-rust line-numbers-mode"><pre><code><span class="token macro property">cfg_io_util!</span> <span class="token punctuation">{</span>\n        <span class="token keyword">mod</span> <span class="token module-declaration namespace">read_to_end</span><span class="token punctuation">;</span>\n        <span class="token comment">// Used by process</span>\n        <span class="token keyword">pub</span><span class="token punctuation">(</span><span class="token keyword">crate</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token namespace">read_to_end<span class="token punctuation">::</span></span>read_to_end<span class="token punctuation">;</span>\n\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>展开后:</p><div class="language-rust line-numbers-mode"><pre><code><span class="token attribute attr-name">#[cfg(not(feature = <span class="token string">&quot;io-util&quot;</span>))]</span> \n<span class="token attribute attr-name">#[cfg(feature = <span class="token string">&quot;io-util&quot;</span>)]</span>\n<span class="token attribute attr-name">#[cfg_attr(docsrs, doc(cfg(feature = <span class="token string">&quot;io-util&quot;</span>)))]</span>\n<span class="token keyword">mod</span> <span class="token module-declaration namespace">read_to_end</span><span class="token punctuation">;</span>\n<span class="token comment">// Used by process</span>\n<span class="token attribute attr-name">#[cfg(feature = <span class="token string">&quot;io-util&quot;</span>)]</span>\n<span class="token attribute attr-name">#[cfg_attr(docsrs, doc(cfg(feature = <span class="token string">&quot;io-util&quot;</span>)))]</span>\n<span class="token keyword">pub</span><span class="token punctuation">(</span><span class="token keyword">crate</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token namespace">read_to_end<span class="token punctuation">::</span></span>read_to_end<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="tokio-test-无法运行测试case问题"><a class="header-anchor" href="#tokio-test-无法运行测试case问题" aria-hidden="true">#</a> <code>#[tokio::test]</code>无法运行测试case问题</h2><p>替换为</p><div class="language-rust line-numbers-mode"><pre><code><span class="token attribute attr-name">#[tokio::main]</span>\n<span class="token attribute attr-name">#[test]</span>\n</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>两者基本上是等价的, 一直保持下去也不是问题.</p>',11)];t.render=function(a,e,t,o,r,c){return s(),n("div",null,p)};export{e as __pageData,t as default};
