import{_ as s,c as n,o as a,a as e}from"./app.3ef0f76b.js";const m='{"title":"typescript\u7684\u4E00\u4E9B\u9AD8\u7EA7\u8BED\u6CD5","description":"","frontmatter":{"title":"typescript\u7684\u4E00\u4E9B\u9AD8\u7EA7\u8BED\u6CD5","date":"2022-01-010T21:57:03+08:00","draft":false,"tags":["program","typescript","javascript"],"categories":["other"]},"headers":[{"level":2,"title":"\u8054\u5408\u7C7B\u578B\u5B9A\u4E49","slug":"\u8054\u5408\u7C7B\u578B\u5B9A\u4E49"},{"level":2,"title":"\u6CDB\u578B","slug":"\u6CDB\u578B"},{"level":3,"title":"\u6700\u7B80\u5355\u7684\u6CDB\u578B","slug":"\u6700\u7B80\u5355\u7684\u6CDB\u578B"},{"level":3,"title":"\u6CDB\u578B\u7684\u4E00\u4E9B\u5173\u952E\u5B57","slug":"\u6CDB\u578B\u7684\u4E00\u4E9B\u5173\u952E\u5B57"},{"level":3,"title":"\u4E00\u4E2A\u5B8C\u6574\u7684\u4F8B\u5B50","slug":"\u4E00\u4E2A\u5B8C\u6574\u7684\u4F8B\u5B50"},{"level":2,"title":"\u66F4\u591A\u7C7B\u578B\u7F16\u7A0B","slug":"\u66F4\u591A\u7C7B\u578B\u7F16\u7A0B"}],"relativePath":"other/typescript_advanced_syntax.md"}',p={},t=e(`<p>\u672C\u6587\u5185\u5BB9\u4E3B\u8981\u6765\u81EA<code>\u73A9\u8F6Cvue3\u5168\u5BB6\u6876</code>\u8BFE\u7A0B.</p><h2 id="\u8054\u5408\u7C7B\u578B\u5B9A\u4E49" tabindex="-1">\u8054\u5408\u7C7B\u578B\u5B9A\u4E49 <a class="header-anchor" href="#\u8054\u5408\u7C7B\u578B\u5B9A\u4E49" aria-hidden="true">#</a></h2><div class="language-typescript line-numbers-mode"><pre><code><span class="token keyword">let</span> course1 <span class="token operator">:</span> <span class="token builtin">string</span><span class="token operator">|</span><span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">//course\u7684\u7C7B\u578B\u53EF\u4EE5\u662Fstring\u4EE5\u53CAnumber,\u5176\u4ED6\u5219\u662F\u9519\u8BEF.</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="\u6CDB\u578B" tabindex="-1">\u6CDB\u578B <a class="header-anchor" href="#\u6CDB\u578B" aria-hidden="true">#</a></h2><p>\u8BED\u8A00\u5F15\u5165\u6CDB\u578B\u540E,\u4E0D\u53EF\u907F\u514D\u7684\u590D\u6742\u5316.</p><h3 id="\u6700\u7B80\u5355\u7684\u6CDB\u578B" tabindex="-1">\u6700\u7B80\u5355\u7684\u6CDB\u578B <a class="header-anchor" href="#\u6700\u7B80\u5355\u7684\u6CDB\u578B" aria-hidden="true">#</a></h3><div class="language-typescript line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">identity</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arg
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="\u6CDB\u578B\u7684\u4E00\u4E9B\u5173\u952E\u5B57" tabindex="-1">\u6CDB\u578B\u7684\u4E00\u4E9B\u5173\u952E\u5B57 <a class="header-anchor" href="#\u6CDB\u578B\u7684\u4E00\u4E9B\u5173\u952E\u5B57" aria-hidden="true">#</a></h3><h4 id="keyof" tabindex="-1">keyof <a class="header-anchor" href="#keyof" aria-hidden="true">#</a></h4><p>keyof <code>keyof T</code> \u83B7\u53D6T\u7684\u6240\u6709key,\u76F8\u5F53\u4E8E\u8FD4\u56DE\u4E00\u4E2A\u5B57\u7B26\u4E32\u5217\u8868,\u5176\u4E2D\u6BCF\u4E00\u4E2A\u5B57\u7B26\u4E32\u90FD\u662FT\u7684key</p><div class="language-ts line-numbers-mode"><pre><code><span class="token keyword">type</span> <span class="token class-name">CourseProps</span> <span class="token operator">=</span> <span class="token keyword">keyof</span> VueCourse5 <span class="token comment">// \u53EA\u80FD\u662Fname\u548Cprice\u9009\u4E00\u4E2A</span>
<span class="token keyword">let</span> k<span class="token operator">:</span>CourseProps <span class="token operator">=</span> <span class="token string">&#39;name&#39;</span>
<span class="token keyword">let</span> k1<span class="token operator">:</span>CourseProps <span class="token operator">=</span> <span class="token string">&#39;p&#39;</span> <span class="token comment">// \u6539\u6210price</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="\u7C7B\u578B\u4E09\u5143\u8868\u8FBE\u5F0F" tabindex="-1">\u7C7B\u578B\u4E09\u5143\u8868\u8FBE\u5F0F <a class="header-anchor" href="#\u7C7B\u578B\u4E09\u5143\u8868\u8FBE\u5F0F" aria-hidden="true">#</a></h4><p>extends \u5173\u952E\u5B57 <code>T extends U? X:Y</code> \u4E3B\u8981\u8FD9\u91CC\u7684T,U,X,Y\u90FD\u662F\u7C7B\u578B,\u800C\u4E0D\u662F\u6570\u503C</p><div class="language-ts line-numbers-mode"><pre><code><span class="token keyword">type</span> <span class="token class-name">MyType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">boolean</span></span><span class="token operator">?</span>String<span class="token operator">:</span>Number
<span class="token keyword">type</span> <span class="token class-name">MyTypeString</span><span class="token operator">=</span>MyType<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span> <span class="token comment">//MyTypeString\u7C7B\u578B\u5B9E\u9645\u4E0A\u662FString \u7B49\u4EF7\u4E8Etype MyTypeString=String</span>
<span class="token keyword">type</span> <span class="token class-name">MyTypeNumber</span><span class="token operator">=</span>MyType<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span> <span class="token comment">//MyTypeString\u7C7B\u578B\u5B9E\u9645\u4E0A\u662FNumber,\u7B49\u4EF7\u4E8Etype MyTypeNumber=Number</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="in-\u5173\u952E\u5B57" tabindex="-1">in \u5173\u952E\u5B57 <a class="header-anchor" href="#in-\u5173\u952E\u5B57" aria-hidden="true">#</a></h4><p>in \u7528\u4E8E\u7C7B\u578B\u4E2D</p><div class="language-ts line-numbers-mode"><pre><code><span class="token keyword">type</span> <span class="token class-name">Courses</span> <span class="token operator">=</span> <span class="token string">&#39;\u73A9\u8F6CVue 3&#39;</span><span class="token operator">|</span><span class="token string">&#39;\u91CD\u5B66\u524D\u7AEF&#39;</span>
<span class="token keyword">type</span> <span class="token class-name">CourseObj</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>k <span class="token keyword">in</span> Courses<span class="token punctuation">]</span><span class="token operator">:</span><span class="token builtin">number</span> <span class="token comment">// \u904D\u5386Courses\u7C7B\u578B\u4F5C\u4E3Akey</span>
<span class="token punctuation">}</span>
<span class="token comment">// \u4E0A\u9762\u7684\u4EE3\u7801\u7B49\u4E8E\u4E0B\u9762\u7684\u5B9A\u4E49</span>
<span class="token comment">// type CourseObj = {</span>
<span class="token comment">//     \u73A9\u8F6CVue 3: number;</span>
<span class="token comment">//     \u91CD\u5B66\u524D\u7AEF: number;</span>
<span class="token comment">// }</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="\u7EC4\u5408\u8D77\u6765\u7684getproperty" tabindex="-1">\u7EC4\u5408\u8D77\u6765\u7684getProperty <a class="header-anchor" href="#\u7EC4\u5408\u8D77\u6765\u7684getproperty" aria-hidden="true">#</a></h4><p>\u8FD9\u91CC\u7684extends\u548C\u4E0A\u9762\u8BF4\u7684\u5E76\u4E0D\u4E00\u81F4, <code>K extends key of T</code>\u9650\u5B9A\u4E86K\u7684\u7C7B\u578B\u662F\u4E00\u4E2A\u5B57\u7B26\u4E32\u5E38\u91CF\u5217\u8868,\u5176\u4E2D\u6BCF\u4E00\u4E2A\u5B57\u7B26\u4E32\u90FD\u662FT\u7684field\u540D\u5B57. <code>T[K]</code>\u5219\u8868\u793AT\u7684field K\u7684\u7C7B\u578B</p><div class="language-ts line-numbers-mode"><pre><code><span class="token keyword">function</span> <span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>obj<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">,</span> field<span class="token operator">:</span><span class="token constant">K</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">[</span>field<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="infer\u5173\u952E\u5B57" tabindex="-1">infer\u5173\u952E\u5B57 <a class="header-anchor" href="#infer\u5173\u952E\u5B57" aria-hidden="true">#</a></h4><p>\u6765\u81EA<a href="https://zhuanlan.zhihu.com/p/402541135" target="_blank" rel="noopener noreferrer">\u77E5\u4E4E</a></p><p>infer\u5173\u952E\u5B57\u7528\u4E8E\u7C7B\u578B\u89E3\u6784,\u60F3\u5F97\u5230\u4E00\u4E2A\u7C7B\u578B\u7684\u67D0\u90E8\u5206\u7684\u7C7B\u578B,\u53EF\u4EE5\u4F7F\u7528infer.</p><div class="language-ts line-numbers-mode"><pre><code><span class="token keyword">type</span> <span class="token class-name">ReturnType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">infer</span> <span class="token constant">R</span><span class="token operator">?</span> <span class="token constant">R</span><span class="token operator">:</span><span class="token builtin">any</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u8FD9\u91CC\u7684T\u5982\u679Cinfer,\u6BD4\u5982 <code>T extends ()=&gt;string</code> \u8868\u793AT\u662F\u4E00\u4E2A\u8FD4\u56DE\u7C7B\u578B\u662Fstring\u7684\u51FD\u6570,\u4F46\u662F\u6211\u60F3\u53D6\u8FD9\u4E2A\u51FD\u6570\u7C7B\u578B\u7684\u8FD4\u56DE\u503C\u7C7B\u578B,\u8BE5\u600E\u4E48\u529E\u5462? \u5C31\u7528<code>infer R</code>,\u76F8\u5F53\u4E8E\u5F15\u5165\u4E86\u4E00\u4E2A\u65B0\u7C7B\u578B,\u8BE5\u7C7B\u578B\u8868\u793A<code>T</code>\u7684\u67D0\u4E00\u4E2A\u5C40\u90E8\u7684\u7C7B\u578B.</p><h4 id="\u66F4\u591A\u4F8B\u5B50" tabindex="-1">\u66F4\u591A\u4F8B\u5B50 <a class="header-anchor" href="#\u66F4\u591A\u4F8B\u5B50" aria-hidden="true">#</a></h4><div class="language-ts line-numbers-mode"><pre><code><span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span> <span class="token comment">//\u6CE8\u610F\u8FD9\u91CC\u7684?,</span>
<span class="token punctuation">}</span>
<span class="token comment">//Exclude from T those types that are assignable to U</span>
<span class="token keyword">type</span> <span class="token class-name">Exclude<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">K</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token constant">K</span></span><span class="token operator">?</span> <span class="token builtin">never</span><span class="token operator">:</span> <span class="token constant">T</span>

<span class="token comment">//Construct a type with a set of properties K of type T</span>
<span class="token keyword">type</span> <span class="token class-name">Record<span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> key <span class="token keyword">of</span> <span class="token builtin">any</span><span class="token punctuation">,</span><span class="token constant">T</span><span class="token operator">&gt;</span></span><span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// From T, pick a set of properties whose keys are in the union K</span>
<span class="token keyword">type</span> <span class="token class-name">Pick<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">P</span> <span class="token keyword">in</span> <span class="token constant">K</span><span class="token punctuation">]</span><span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="\u4E00\u4E2A\u5B8C\u6574\u7684\u4F8B\u5B50" tabindex="-1">\u4E00\u4E2A\u5B8C\u6574\u7684\u4F8B\u5B50 <a class="header-anchor" href="#\u4E00\u4E2A\u5B8C\u6574\u7684\u4F8B\u5B50" aria-hidden="true">#</a></h3><div class="language-ts line-numbers-mode"><pre><code><span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&#39;axios&#39;</span>
<span class="token keyword">interface</span> <span class="token class-name">Api</span><span class="token punctuation">{</span>
    <span class="token string-property property">&#39;/course/buy&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span><span class="token builtin">number</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;/course/comment&#39;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        id<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>
        message<span class="token operator">:</span><span class="token builtin">string</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">keyof</span> Api<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span><span class="token constant">T</span><span class="token punctuation">,</span>obj<span class="token operator">:</span>Api<span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>obj<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">request</span><span class="token punctuation">(</span><span class="token string">&#39;/course/buy&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">request</span><span class="token punctuation">(</span><span class="token string">&#39;/course/comment&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>message<span class="token operator">:</span><span class="token string">&#39;\u560E\u560E\u597D\u770B&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">request</span><span class="token punctuation">(</span><span class="token string">&#39;/course/comment&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//Argument type {id: number} is not assignable to parameter type Api[&quot;/course/comment&quot;] </span>
<span class="token function">request</span><span class="token punctuation">(</span><span class="token string">&#39;/course/404&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>id<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//Argument type &quot;/course/404&quot; is not assignable to parameter type keyof Api </span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="\u66F4\u591A\u7C7B\u578B\u7F16\u7A0B" tabindex="-1">\u66F4\u591A\u7C7B\u578B\u7F16\u7A0B <a class="header-anchor" href="#\u66F4\u591A\u7C7B\u578B\u7F16\u7A0B" aria-hidden="true">#</a></h2><p>\u8FD9\u73A9\u610F\u611F\u89C9\u7C7B\u4F3C\u4E8E\u9488\u5BF9\u7C7B\u578B\u7684\u7F16\u7A0B\u8BED\u6CD5,\u6709\u70B9\u8C61\u9AD8\u7EA7\u5B8F,\u548C\u666E\u901A\u7F16\u7A0B\u7684\u601D\u8DEF\u662F\u4E0D\u592A\u4E00\u6837\u7684. \u66F4\u591A\u7684\u4F8B\u5B50\u5230<a href="https://github.com/type-challenges/type-challenges" target="_blank" rel="noopener noreferrer">type-challenges</a>. \u8FD9\u4E5F\u662Fc++,Rust\u7B49\u8BED\u8A00\u5728\u652F\u6301\u6CDB\u578B\u540E,\u4E0D\u53EF\u907F\u514D\u5E26\u6765\u7684\u590D\u6742\u5316\u95EE\u9898. \u800CJava\u7684\u6CDB\u578B\u5219\u5B9E\u9645\u4E0A\u662F\u52A8\u6001\u6267\u884C\u7684\u65F6\u5019\u90FD\u4F1A\u8F6C\u6362\u6210Object,\u5E76\u4E0D\u5B8C\u5168 \u7F16\u8BD1\u671F\u6CDB\u578B.</p>`,31),o=[t];function c(r,l,i,k,u,d){return a(),n("div",null,o)}var y=s(p,[["render",c]]);export{m as __pageData,y as default};
