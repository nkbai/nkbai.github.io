import{_ as s,c as a,o as n,a as e}from"./app.eccc2abf.js";const k='{"title":"[9485733]bitcoin script","description":"","frontmatter":{"title":"[9485733]bitcoin script","date":"2018-11-21T06:12:53.000Z","draft":false,"markup":"mmark"},"headers":[{"level":2,"title":"1.P2PK paytopublic_key","slug":"_1-p2pk-pay-to-public-key"},{"level":2,"title":"2. P2PKH paytopublickeyhash","slug":"_2-p2pkh-pay-to-public-key-hash"},{"level":2,"title":"3.P2SH paytoscript_hash","slug":"_3-p2sh-pay-to-script-hash"},{"level":2,"title":"4.P2WPKH paytowitnesspublickey_hash","slug":"_4-p2wpkh-pay-to-witness-public-key-hash"},{"level":2,"title":"5. P2WSH paytowitnessscripthash","slug":"_5-p2wsh-pay-to-witness-script-hash"},{"level":2,"title":"\u77FF\u5DE5\u5982\u4F55\u533A\u5206\u4EA4\u6613\u7C7B\u578B?","slug":"\u77FF\u5DE5\u5982\u4F55\u533A\u5206\u4EA4\u6613\u7C7B\u578B"},{"level":2,"title":"scriptSig\u5305\u542B\u4EC0\u4E48\u5185\u5BB9?","slug":"scriptsig\u5305\u542B\u4EC0\u4E48\u5185\u5BB9"}],"relativePath":"blockchain/btcd/bitcoin script.md"}',p={},t=e(`<h1 id="p2pk-p2pkh-ms-p2sh-op-return-\u7B49\u7684\u533A\u522B" tabindex="-1">P2PK P2PKH,MS,P2SH,OP_RETURN \u7B49\u7684\u533A\u522B <a class="header-anchor" href="#p2pk-p2pkh-ms-p2sh-op-return-\u7B49\u7684\u533A\u522B" aria-hidden="true">#</a></h1><h2 id="_1-p2pk-pay-to-public-key" tabindex="-1">1.P2PK pay_to_public_key <a class="header-anchor" href="#_1-p2pk-pay-to-public-key" aria-hidden="true">#</a></h2><p>pubkey script:</p><div class="language-"><pre><code> &lt;pubkey&gt; OP_CHECKSIG
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>signature script: [sig]</p><h2 id="_2-p2pkh-pay-to-public-key-hash" tabindex="-1">2. P2PKH pay_to_public_key_hash <a class="header-anchor" href="#_2-p2pkh-pay-to-public-key-hash" aria-hidden="true">#</a></h2><p>pubkey script:</p><div class="language-"><pre><code> OP_DUP OP_HASH160 hash(pubkey) OP_EQUALVERIFY 
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>signature script:</p><div class="language-"><pre><code>[sig] &lt;pubkey&gt;
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_3-p2sh-pay-to-script-hash" tabindex="-1">3.P2SH pay_to_script_hash <a class="header-anchor" href="#_3-p2sh-pay-to-script-hash" aria-hidden="true">#</a></h2><p>pubkey script:</p><div class="language-"><pre><code>OP_HASH160 hash(Redeem script) OP_EQUAL
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>signature script \u6B64\u5904\u548C\u4E0A\u9762\u4E24\u4E2A\u90FD\u4E0D\u4E00\u6837,\u89E3\u9501\u9700\u8981\u5206\u6210\u4E24\u90E8 \u7B2C\u4E00\u6B65: \u9A8C\u8BC1 redeem script hash \u503C\u662F\u5426\u6B63\u786E,\u4E5F\u5C31\u662F\u5C06redeem script \u4F5C\u4E3A\u6570\u636E\u653E\u5230\u6808\u4E0A,\u7136\u540E\u6267\u884C OP_HASH160,\u5982\u679C\u4E3A\u771F\u624D\u4F1A\u6267\u884C\u7B2C\u4E8C\u6B65,\u5426\u5219\u5931\u8D25 \u7B2C\u4E8C\u6B65:\u6267\u884Credeem script, \u5C06signature script+redeem script \u4E00\u8D77\u6267\u884C,\u5982\u679C\u4E3A\u771F\u5219\u6210\u529F,\u5426\u5219\u4EA4\u6613\u5931\u8D25</p><h2 id="_4-p2wpkh-pay-to-witness-public-key-hash" tabindex="-1">4.P2WPKH pay_to_witness_public_key_hash <a class="header-anchor" href="#_4-p2wpkh-pay-to-witness-public-key-hash" aria-hidden="true">#</a></h2><p>pubkey script:</p><div class="language-"><pre><code>0 HASH160(public key)
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>\u89E3\u9501\u811A\u672C signature script(scriptSig): \u7A7A \u8FD8\u589E\u52A0\u4E86\u4E00\u4E2A witness \u5B57\u6BB5,\u7528\u4E8E\u9A8C\u8BC1\u4EA4\u6613\u5408\u6CD5\u6027 <code>witness: &lt;signature&gt;</code></p><p>\u5982\u679C\u6309\u7167\u524D\u9762\u7684\u9A8C\u8BC1\u89C4\u5219,\u6240\u6709\u7684\u9694\u79BB\u89C1\u8BC1\u4EA4\u6613\u90FD\u662F\u5408\u6CD5\u7684,\u6240\u4EE5\u8FD9\u662F\u4E00\u4E2A\u8F6F\u5206\u53C9.</p><h2 id="_5-p2wsh-pay-to-witness-script-hash" tabindex="-1">5. P2WSH pay_to_witness_script_hash <a class="header-anchor" href="#_5-p2wsh-pay-to-witness-script-hash" aria-hidden="true">#</a></h2><p>pubkey script:</p><div class="language-"><pre><code>0 SHA256(redeem script)
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>scriptSig: \u7A7A <code>witness: &lt;signature&gt; &lt;redeem script&gt;</code></p><h2 id="\u77FF\u5DE5\u5982\u4F55\u533A\u5206\u4EA4\u6613\u7C7B\u578B" tabindex="-1">\u77FF\u5DE5\u5982\u4F55\u533A\u5206\u4EA4\u6613\u7C7B\u578B? <a class="header-anchor" href="#\u77FF\u5DE5\u5982\u4F55\u533A\u5206\u4EA4\u6613\u7C7B\u578B" aria-hidden="true">#</a></h2><p>\u4E3B\u8981\u662F\u6839\u636E pubkey script \u7684\u6A21\u5F0F\u8FDB\u884C\u5339\u914D,\u4E0D\u540C\u7684\u6A21\u5F0F\u5339\u914D\u4E0D\u540C\u7684\u9A8C\u8BC1\u89C4\u5219.\u5C24\u5176\u662F\u9694\u79BB\u89C1\u8BC1\u90E8\u5206.</p><h2 id="scriptsig\u5305\u542B\u4EC0\u4E48\u5185\u5BB9" tabindex="-1">scriptSig\u5305\u542B\u4EC0\u4E48\u5185\u5BB9? <a class="header-anchor" href="#scriptsig\u5305\u542B\u4EC0\u4E48\u5185\u5BB9" aria-hidden="true">#</a></h2><p>\u6CA1\u770B\u6E90\u7801,\u7EAF\u5C5E\u4E2A\u4EBA\u731C\u60F3. \u4E00\u4E2A tx \u7684\u7ED3\u6784\u5982\u4E0B:</p><div class="language-go line-numbers-mode"><pre><code><span class="token keyword">type</span> MsgTx <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Version  <span class="token builtin">int32</span>
	TxIn     <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>TxIn
	TxOut    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>TxOut
	LockTime <span class="token builtin">uint32</span>
<span class="token punctuation">}</span>
<span class="token comment">// TxIn defines a bitcoin transaction input.</span>
<span class="token keyword">type</span> TxIn <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	PreviousOutPoint OutPoint
	SignatureScript  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
	Witness          TxWitness
	Sequence         <span class="token builtin">uint32</span>
<span class="token punctuation">}</span>
<span class="token comment">// TxOut defines a bitcoin transaction output.</span>
<span class="token keyword">type</span> TxOut <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Value    <span class="token builtin">int64</span>
	PkScript <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>\u7B7E\u540D\u653E\u5728 TxIn \u4E2D,\u56E0\u6B64\u7B7E\u540D\u5E94\u8BE5\u662F\u5BF9hash(Version,LockTime, current TxIn(exclude signature script),all TxOut)) \u8FDB\u884C\u7B7E\u540D.</p><p>\u8FD9\u6837\u77FF\u5DE5\u53EF\u4EE5\u9A8C\u8BC1\u4EA4\u6613,\u4F46\u662F\u4E0D\u80FD\u4FEE\u6539\u4EA4\u6613. \u81F3\u4E8E TxID \u4E3A\u4EC0\u4E48\u4F1A\u53D8,\u662F\u5426\u56E0\u4E3A TxIn\u4EE5\u53CA TxOut \u7684\u987A\u5E8F\u53EF\u4EE5\u88AB\u77FF\u5DE5\u8C03\u6574?</p>`,30),i=[t];function r(c,l,u,o,h,d){return n(),a("div",null,i)}var _=s(p,[["render",r]]);export{k as __pageData,_ as default};
