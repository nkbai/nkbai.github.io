import{_ as s,c as a,o as n,N as e}from"./chunks/framework.3a9190c5.js";const C=JSON.parse('{"title":"1.Libra入门教程-一分钟上手Libra","description":"","frontmatter":{"title":"1.Libra入门教程-一分钟上手Libra","date":"2019-06-16T03:57:03.000Z","draft":false,"markup":"mmark","tags":["rust","blockchain","libra"],"series":["libra"],"categories":["技术相关"]},"headers":[],"relativePath":"blockchain/libra/1.start_in_one_minute.md"}'),l={name:"blockchain/libra/1.start_in_one_minute.md"},p=e(`<ul><li><a href="#下载"> 下载</a></li><li><a href="#编译安装"> 编译安装</a></li><li><a href="#连接到testnet"> 连接到Testnet</a></li><li><a href="#来创建个测试账户"> 来创建个测试账户</a><ul><li><a href="#1-创建alice的账户"> 1. 创建Alice的账户</a></li><li><a href="#2-也创建一个bob的账户"> 2. 也创建一个Bob的账户</a></li></ul></li><li><a href="#测试交易"> 测试交易</a><ul><li><a href="#获取测试币"> 获取测试币</a></li><li><a href="#查询账户余额"> 查询账户余额</a></li><li><a href="#转帐试试"> 转帐试试</a></li><li><a href="#查询账户的序列号"> 查询账户的序列号</a></li></ul></li></ul><h2 id="下载" tabindex="-1">下载 <a class="header-anchor" href="#下载" aria-label="Permalink to &quot;下载&quot;">​</a></h2><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">git clone https://github.com/libra/libra.git</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>任意目录下载完毕以后,只有2M左右的大小,下载很快</p><h2 id="编译安装" tabindex="-1">编译安装 <a class="header-anchor" href="#编译安装" aria-label="Permalink to &quot;编译安装&quot;">​</a></h2><p>libra提供了非常友好的编译安装过程,他会自动下载所有的依赖,包括rust开发工具.</p><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">cd libra</span></span>
<span class="line"><span style="color:#A6ACCD;">./scripts/dev_setup.sh</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">elcome to Libra!</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">This script will download and install the necessary dependencies needed to</span></span>
<span class="line"><span style="color:#A6ACCD;">build Libra Core. This includes:</span></span>
<span class="line"><span style="color:#A6ACCD;">	* Rust (and the necessary components, e.g. rust-fmt, clippy)</span></span>
<span class="line"><span style="color:#A6ACCD;">	* CMake, protobuf, go (for building protobuf)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">If you&#39;d prefer to install these dependencies yourself, please exit this script</span></span>
<span class="line"><span style="color:#A6ACCD;">now with Ctrl-C.</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">Proceed with installing necessary dependencies? (y) &gt; y</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>按照提示,y即可,因为下载内容比较多,速度会比较慢.耐心等待即可,不需要科学上网. 会安装rustup,rust toolchain,CMake,protoc以及Go. Go和Rust真是一对好基友啊,现在都是区块链的主力开发工具了.</p><h2 id="连接到testnet" tabindex="-1">连接到Testnet <a class="header-anchor" href="#连接到testnet" aria-label="Permalink to &quot;连接到Testnet&quot;">​</a></h2><p>目前libra已经提供了测试开发网络,libra本质上是一个联盟链.</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">./scripts/cli/start_cli_testnet.sh</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>会编译安装client 程序,不得不说这个过程有点慢,和go比起来,编译速度不是一般的慢啊! 希望Rust这点能够学学Go,程序员也需要被善待😁.</p><p>一旦编译完成会自动进入控制台</p><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Connected to validator at: ac.testnet.libra.org:80</span></span>
<span class="line"><span style="color:#A6ACCD;">usage: &lt;command&gt; &lt;args&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">Use the following commands:</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">account | a</span></span>
<span class="line"><span style="color:#A6ACCD;">	Account operations</span></span>
<span class="line"><span style="color:#A6ACCD;">query | q</span></span>
<span class="line"><span style="color:#A6ACCD;">	Query operations</span></span>
<span class="line"><span style="color:#A6ACCD;">transfer | transferb | t | tb</span></span>
<span class="line"><span style="color:#A6ACCD;">	&lt;sender_account_address&gt;|&lt;sender_account_ref_id&gt; &lt;receiver_account_address&gt;|&lt;receiver_account_ref_id&gt; &lt;number_of_coins&gt; [gas_unit_price (default=0)] [max_gas_amount (default 10000)] Suffix &#39;b&#39; is for blocking.</span></span>
<span class="line"><span style="color:#A6ACCD;">	Transfer coins from account to another.</span></span>
<span class="line"><span style="color:#A6ACCD;">help | h</span></span>
<span class="line"><span style="color:#A6ACCD;">	Prints this help</span></span>
<span class="line"><span style="color:#A6ACCD;">quit | q!</span></span>
<span class="line"><span style="color:#A6ACCD;">	Exit this client</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">Please, input commands:</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">libra%</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>也来看看他的启动参数吧:</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">client --host ac.testnet.libra.org --port 80 -s ./scripts/cli/trusted_peers.config.toml</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>通过这些参数也可以猜出Libra是比较中心化的.</p><h2 id="来创建个测试账户" tabindex="-1">来创建个测试账户 <a class="header-anchor" href="#来创建个测试账户" aria-label="Permalink to &quot;来创建个测试账户&quot;">​</a></h2><h3 id="_1-创建alice的账户" tabindex="-1">1. 创建Alice的账户 <a class="header-anchor" href="#_1-创建alice的账户" aria-label="Permalink to &quot;1. 创建Alice的账户&quot;">​</a></h3><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">libra% account create</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt; Creating/retrieving next account from wallet</span></span>
<span class="line"><span style="color:#A6ACCD;">Created/retrieved account #0 address f72dde30bd92f758ab81391cf8c55ea843eeea7924d43fb0bf238600acc6f4ae</span></span>
<span class="line"><span style="color:#A6ACCD;">libra%</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>类似以太坊,是hex编码的地址,长度是32个字节,生成速度有点慢,感觉有1秒的延迟.</p><h3 id="_2-也创建一个bob的账户" tabindex="-1">2. 也创建一个Bob的账户 <a class="header-anchor" href="#_2-也创建一个bob的账户" aria-label="Permalink to &quot;2. 也创建一个Bob的账户&quot;">​</a></h3><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">libra% account create</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt; Creating/retrieving next account from wallet</span></span>
<span class="line"><span style="color:#A6ACCD;">Created/retrieved account #1 address 890aa80590d869d858e98c753b79113d27c2a5463ad451107dd96bcae489df8f</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>记得Alice的账户是#0,Bob的是#1哦.</p><h2 id="测试交易" tabindex="-1">测试交易 <a class="header-anchor" href="#测试交易" aria-label="Permalink to &quot;测试交易&quot;">​</a></h2><p>Libra在测试网提供了一个测试挖矿服务<code>Faucet</code>,这个只在测试网上存在,就是说在测试网上要多少测试币有多少测试币,这和比特币以太坊比起来,对开发友好多了.</p><h3 id="获取测试币" tabindex="-1">获取测试币 <a class="header-anchor" href="#获取测试币" aria-label="Permalink to &quot;获取测试币&quot;">​</a></h3><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">libra% account mint 0 100</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt; Minting coins</span></span>
<span class="line"><span style="color:#A6ACCD;">Mint request submitted</span></span>
<span class="line"><span style="color:#A6ACCD;">libra%</span></span>
<span class="line"><span style="color:#A6ACCD;">libra% account mint 1 100</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt; Minting coins</span></span>
<span class="line"><span style="color:#A6ACCD;">Mint request submitted</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>account mint 1 100</code>表示挖100Libra到账户1,也就是Bob账户 几秒钟后,我们的Alice和Bob账户就都有了100Libra.也不清楚Libra测试网出块时间是多久. 当我尝试挖很大的金额的时候<code>account mint 1 100000000000000000000000000</code>,得到错误<code>[ERROR] Error minting coins: Input value is too big: &quot;100000000000000000000000000&quot;, max: 18446744073709.551615</code>. 不知道这个限制只是测试网还是主网也有,需要以后主网上线才知道了.</p><h3 id="查询账户余额" tabindex="-1">查询账户余额 <a class="header-anchor" href="#查询账户余额" aria-label="Permalink to &quot;查询账户余额&quot;">​</a></h3><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">libra% query balance 0</span></span>
<span class="line"><span style="color:#A6ACCD;">Balance is: 100</span></span>
<span class="line"><span style="color:#A6ACCD;">libra% query balance 1</span></span>
<span class="line"><span style="color:#A6ACCD;">Balance is: 100</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>query balance #</code>就是查询第几个账户的余额,看起来非常清晰.</p><h3 id="转帐试试" tabindex="-1">转帐试试 <a class="header-anchor" href="#转帐试试" aria-label="Permalink to &quot;转帐试试&quot;">​</a></h3><p><code>transfer 0 1 10</code> 表示账户0给账户1转10.</p><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">libra% transfer 0 1 10</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt; Transferring</span></span>
<span class="line"><span style="color:#A6ACCD;">Transaction submitted to validator</span></span>
<span class="line"><span style="color:#A6ACCD;">To query for transaction status, run: query txn_acc_seq 0 0 &lt;fetch_events=true|false&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>再次查询账户,可以看到金额发生了变化</p><div class="language-txt line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">libra% query balance 0</span></span>
<span class="line"><span style="color:#A6ACCD;">Balance is: 90</span></span>
<span class="line"><span style="color:#A6ACCD;">libra% query balance 1</span></span>
<span class="line"><span style="color:#A6ACCD;">Balance is: 110</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当然也可以通过地址转账,形如<code> transfer 0 be225fe4999a7b28730d49e75140a43b03605eea07115cc37670cfaaa63b731b 20</code> 表示通过账户0给<code>be225fe4999a7b28730d49e75140a43b03605eea07115cc37670cfaaa63b731b</code>这个地址转20Libra</p><h3 id="查询账户的序列号" tabindex="-1">查询账户的序列号 <a class="header-anchor" href="#查询账户的序列号" aria-label="Permalink to &quot;查询账户的序列号&quot;">​</a></h3><p>Libra的Sequence Number(序列号)类似于以太坊中的Nonce,基于账户模型的链都必须有此字段来防止交易重放.</p><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">libra% query sequence 0</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt; Getting current sequence number</span></span>
<span class="line"><span style="color:#A6ACCD;">Sequence number is: 1</span></span>
<span class="line"><span style="color:#A6ACCD;">libra% query sequence 1</span></span>
<span class="line"><span style="color:#A6ACCD;">&gt;&gt; Getting current sequence number</span></span>
<span class="line"><span style="color:#A6ACCD;">Sequence number is: 0</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>也就是账户0发生了一笔交易.</p><p>更多关于Libra的介绍,请关注后续文章,谢谢阅读.</p>`,44),r=[p];function i(t,c,o,b,u,d){return n(),a("div",null,r)}const A=s(l,[["render",i]]);export{C as __pageData,A as default};
