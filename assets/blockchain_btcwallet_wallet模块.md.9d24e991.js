import{_ as a,c as e,o as s,a as n}from"./app.dbcd9662.js";const b='{"title":"wallet\u6A21\u5757","description":"","frontmatter":{"title":"wallet\u6A21\u5757","date":"2019-05-23T01:07:52.193Z","draft":false,"markup":"mmark"},"headers":[{"level":2,"title":"loader","slug":"loader"},{"level":2,"title":"Wallet \u6838\u5FC3","slug":"wallet-\u6838\u5FC3"},{"level":3,"title":"http rpc\u7684walletpassphrase\u63A5\u53E3","slug":"http-rpc\u7684walletpassphrase\u63A5\u53E3"},{"level":2,"title":"Wallet.txCreator \u4E8B\u4EF6\u5FAA\u73AF","slug":"wallet-txcreator-\u4E8B\u4EF6\u5FAA\u73AF"}],"relativePath":"blockchain/btcwallet/wallet\u6A21\u5757.md"}',l={},t=n(`<h1 id="wallet\u6A21\u5757" tabindex="-1">wallet\u6A21\u5757 <a class="header-anchor" href="#wallet\u6A21\u5757" aria-hidden="true">#</a></h1><p>wallet\u662F\u6574\u4E2Abtcwallet\u7684\u6838\u5FC3</p><h2 id="loader" tabindex="-1">loader <a class="header-anchor" href="#loader" aria-hidden="true">#</a></h2><div class="language-go line-numbers-mode"><pre><code><span class="token comment">// Loader implements the creating of new and opening of existing wallets, while</span>
<span class="token comment">// providing a callback system for other subsystems to handle the loading of a</span>
<span class="token comment">// wallet.  This is primarily intended for use by the RPC servers, to enable</span>
<span class="token comment">// methods and services which require the wallet when the wallet is loaded by</span>
<span class="token comment">// another subsystem.</span>
<span class="token comment">//</span>
<span class="token comment">// Loader is safe for concurrent access.</span>
<span class="token keyword">type</span> Loader <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	callbacks      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token operator">*</span>Wallet<span class="token punctuation">)</span>
	chainParams    <span class="token operator">*</span>chaincfg<span class="token punctuation">.</span>Params
	dbDirPath      <span class="token builtin">string</span>
	recoveryWindow <span class="token builtin">uint32</span>
	wallet         <span class="token operator">*</span>Wallet
	db             walletdb<span class="token punctuation">.</span>DB
	mu             sync<span class="token punctuation">.</span>Mutex
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Loader\u4E3B\u8981\u8D1F\u8D23\u521B\u5EFA\u6253\u5F00\u94B1\u5305<code>Wallet</code>,\u4ED6\u4F1A\u63D0\u4F9B\u4E00\u4E9Bcallback\u65B9\u6CD5,\u8BA9\u94B1\u5305\u6253\u5F00\u4EE5\u540E\u81EA\u52A8\u8C03\u7528\u8FD9\u4E9Bcallback. \u4E3B\u8981\u662F<code>onLoaded</code>\u548C<code>RunAfterLoad</code></p><h2 id="wallet-\u6838\u5FC3" tabindex="-1">Wallet \u6838\u5FC3 <a class="header-anchor" href="#wallet-\u6838\u5FC3" aria-hidden="true">#</a></h2><p>rpc\u63A5\u53E3\u7B80\u5355\u5C01\u88C5\u4EE5\u540E,\u6700\u540E\u90FD\u662F\u76F4\u63A5\u8D70\u5230Wallet\u8FDB\u884C\u5904\u7406.Wallet\u5185\u5BB9\u975E\u5E38\u4E30\u5BCC.</p><p>\u8FD9\u91CC\u627E\u4E00\u4E2A\u7B80\u5355rpc\u4F8B\u5B50\u6765\u4ECB\u7ECD.</p><h3 id="http-rpc\u7684walletpassphrase\u63A5\u53E3" tabindex="-1">http rpc\u7684walletpassphrase\u63A5\u53E3 <a class="header-anchor" href="#http-rpc\u7684walletpassphrase\u63A5\u53E3" aria-hidden="true">#</a></h3><ol><li>methods.go\u4E2D\u7684rpcHandlers\u8FDB\u884C\u6CE8\u518C<code> &quot;walletpassphrase&quot;: {handler: walletPassphrase},</code></li><li><code>func walletPassphrase(icmd interface{}, w *wallet.Wallet) (interface{}, error)</code>,</li><li><code>func (w *Wallet) Unlock(passphrase []byte, lock &lt;-chan time.Time) error </code> \u8FDB\u5165Wallet</li><li>\u521B\u5EFAunlockRequest,\u53D1\u9001\u7ED9w.unlockRequests</li><li>\u8FDB\u5165Wallet.walletLocker \u6D88\u606F\u5FAA\u73AF\u4E2D,Wallet\u8FD8\u6709\u4E00\u4E2A\u72EC\u7ACB\u7684\u6D88\u606F\u5FAA\u73AFtxCreator</li><li>\u8FDB\u5165w.Manager.Unlock,Manager\u662Fwaddrmgr.Manager\u7C7B\u578B</li><li>Unlock\u8981\u505A\u7684\u5DE5\u4F5C\u6709\u5F88\u591A,\u9996\u5148\u5C06\u76F8\u5173\u5BC6\u7801\u586B\u5145,\u8FD9\u6837\u4E0B\u6B21\u9700\u8981\u89E3\u5BC6\u7684\u65F6\u5019\u624D\u80FD\u4F7F\u7528</li></ol><p>\u7279\u522B\u6CE8\u610F: \u8FD9\u91CC\u7684timeout\u7684\u7528\u6CD5, for,select\u7EC4\u5408\u7684\u65F6\u5019,\u4E00\u5F00\u59CBtimeout\u5B8C\u5168\u6CA1\u6709\u51C6\u5907\u597D,\u53EA\u662F\u5728\u9700\u8981\u7684\u65F6\u5019\u51C6\u5907\u597D,\u7528\u5B8C\u4E86\u518D\u6B21\u7F6E\u4E3Anil\u5373\u53EF.</p><h2 id="wallet-txcreator-\u4E8B\u4EF6\u5FAA\u73AF" tabindex="-1">Wallet.txCreator \u4E8B\u4EF6\u5FAA\u73AF <a class="header-anchor" href="#wallet-txcreator-\u4E8B\u4EF6\u5FAA\u73AF" aria-hidden="true">#</a></h2><p>\u4E3B\u8981\u662F\u5904\u7406createTxRequest,\u5728\u6307\u5B9A\u8D26\u6237\u4E0A,\u6839\u636E\u9700\u8981\u8F93\u51FA\u7684\u91D1\u989D\u4E00\u8D77\u5176\u4ED6\u8981\u6C42,\u9009\u62E9\u5408\u9002\u7684UTXO,\u7136\u540E\u5F62\u6210\u672A\u7B7E\u540D\u7684Tx</p>`,13),r=[t];function p(c,o,i,d,u,h){return s(),e("div",null,r)}var w=a(l,[["render",p]]);export{b as __pageData,w as default};
